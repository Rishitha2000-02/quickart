{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pedda\\\\OneDrive\\\\Desktop\\\\bic1\\\\client\\\\src\\\\Pages\\\\cart.js\",\n  _s = $RefreshSig$();\nimport { useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { AuthContext } from '../App';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const {\n    token,\n    cart,\n    setCart\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const handleRemoveFromCart = id => {\n    setCart(cart.filter(item => item.id !== id));\n  };\n  const handleIncreaseQuantity = id => {\n    setCart(cart.map(item => item.id === id ? {\n      ...item,\n      quantity: item.quantity + 1\n    } : item));\n  };\n  const handleDecreaseQuantity = id => {\n    setCart(cart.map(item => item.id === id && item.quantity > 1 ? {\n      ...item,\n      quantity: item.quantity - 1\n    } : item));\n  };\n  const handleConfirmOrder = async () => {\n    if (!token) {\n      alert('Please log in to confirm order');\n      return;\n    }\n    if (cart.length === 0) {\n      alert('Your cart is empty');\n      return;\n    }\n    try {\n      const orderData = {\n        items: cart.map(item => ({\n          product_id: item.id,\n          quantity: item.quantity,\n          price: item.price\n        }))\n      };\n      console.log('Sending order data:', orderData); // Debug sent data\n      const res = await axios.post('http://localhost:5001/api/admin/orders', orderData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log('Server response:', res.data); // Debug response\n      if (res.status === 201) {\n        alert('Order confirmed successfully!');\n        setCart([]); // Clear cart\n        navigate('/');\n      }\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error('Order confirmation error:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message, err.stack); // Detailed error\n      alert(`Order confirmation failed: ${((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message}`);\n    }\n  };\n  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  if (!token) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center text-red-500 text-lg mt-8\",\n    children: \"Please log in to view your cart.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-center text-blue-700 mb-6\",\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), cart.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-500 text-lg\",\n      children: \"Your cart is empty. Add items from Home or Products!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid gap-4 max-w-2xl mx-auto\",\n        children: cart.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded-lg shadow-md flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.image,\n            alt: item.name,\n            className: \"w-16 h-16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-green-600 font-bold\",\n              children: [\"\\u20B9\", item.price, \" x \", item.quantity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleDecreaseQuantity(item.id),\n              className: \"btn btn-secondary\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleIncreaseQuantity(item.id),\n              className: \"btn btn-secondary\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleRemoveFromCart(item.id),\n              className: \"btn btn-danger\",\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 text-right max-w-2xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-2xl font-bold text-blue-700\",\n          children: [\"Total: \\u20B9\", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleConfirmOrder,\n          className: \"btn btn-secondary mt-4\",\n          children: \"Confirm Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"/sNsfqNCM02IbSJ3TcQIXjsuzQY=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["useContext","useNavigate","axios","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Cart","_s","token","cart","setCart","navigate","handleRemoveFromCart","id","filter","item","handleIncreaseQuantity","map","quantity","handleDecreaseQuantity","handleConfirmOrder","alert","length","orderData","items","product_id","price","console","log","res","post","headers","Authorization","data","status","err","_err$response","_err$response2","_err$response2$data","error","response","message","stack","total","reduce","sum","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","image","alt","name","onClick","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/pedda/OneDrive/Desktop/bic1/client/src/Pages/cart.js"],"sourcesContent":["import { useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../App';\r\n\r\nfunction Cart() {\r\n  const { token, cart, setCart } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  const handleRemoveFromCart = (id) => {\r\n    setCart(cart.filter(item => item.id !== id));\r\n  };\r\n\r\n  const handleIncreaseQuantity = (id) => {\r\n    setCart(cart.map(item =>\r\n      item.id === id ? { ...item, quantity: item.quantity + 1 } : item\r\n    ));\r\n  };\r\n\r\n  const handleDecreaseQuantity = (id) => {\r\n    setCart(cart.map(item =>\r\n      item.id === id && item.quantity > 1 ? { ...item, quantity: item.quantity - 1 } : item\r\n    ));\r\n  };\r\n\r\n  const handleConfirmOrder = async () => {\r\n    if (!token) {\r\n      alert('Please log in to confirm order');\r\n      return;\r\n    }\r\n    if (cart.length === 0) {\r\n      alert('Your cart is empty');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const orderData = { items: cart.map(item => ({\r\n        product_id: item.id,\r\n        quantity: item.quantity,\r\n        price: item.price\r\n      })) };\r\n      console.log('Sending order data:', orderData); // Debug sent data\r\n      const res = await axios.post(\r\n        'http://localhost:5001/api/admin/orders',\r\n        orderData,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      console.log('Server response:', res.data); // Debug response\r\n      if (res.status === 201) {\r\n        alert('Order confirmed successfully!');\r\n        setCart([]); // Clear cart\r\n        navigate('/');\r\n      }\r\n    } catch (err) {\r\n      console.error('Order confirmation error:', err.response?.data || err.message, err.stack); // Detailed error\r\n      alert(`Order confirmation failed: ${err.response?.data?.error || err.message}`);\r\n    }\r\n  };\r\n\r\n  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n\r\n  if (!token) return <div className=\"text-center text-red-500 text-lg mt-8\">Please log in to view your cart.</div>;\r\n\r\n  return (\r\n    <div className=\"py-8\">\r\n      <h2 className=\"text-3xl font-bold text-center text-blue-700 mb-6\">Your Cart</h2>\r\n      {cart.length === 0 ? (\r\n        <p className=\"text-center text-gray-500 text-lg\">Your cart is empty. Add items from Home or Products!</p>\r\n      ) : (\r\n        <>\r\n          <div className=\"grid gap-4 max-w-2xl mx-auto\">\r\n            {cart.map((item) => (\r\n              <div key={item.id} className=\"bg-white p-4 rounded-lg shadow-md flex items-center justify-between\">\r\n                <img src={item.image} alt={item.name} className=\"w-16 h-16\" />\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">{item.name}</h3>\r\n                  <p className=\"text-green-600 font-bold\">₹{item.price} x {item.quantity}</p>\r\n                </div>\r\n                <div className=\"space-x-2\">\r\n                  <button onClick={() => handleDecreaseQuantity(item.id)} className=\"btn btn-secondary\">-</button>\r\n                  <button onClick={() => handleIncreaseQuantity(item.id)} className=\"btn btn-secondary\">+</button>\r\n                  <button onClick={() => handleRemoveFromCart(item.id)} className=\"btn btn-danger\">Remove</button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"mt-6 text-right max-w-2xl mx-auto\">\r\n            <h3 className=\"text-2xl font-bold text-blue-700\">Total: ₹{total.toFixed(2)}</h3>\r\n            <button onClick={handleConfirmOrder} className=\"btn btn-secondary mt-4\">Confirm Order</button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}